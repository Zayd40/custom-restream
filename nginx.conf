worker_processes 1;

events {
    worker_connections 1024;
}

rtmp {
    server {
        listen 1935;
        chunk_size 4096;

        # OBS will stream to:
        # rtmp://YOUR-RAILWAY-RTMP-HOST/live
        # Stream key: stream
        application live {
            live on;

            # Push to YouTube (RTMP)
            push rtmp://a.rtmp.youtube.com/live2/${YOUTUBE_KEY};

            # (Optional) TikTok RTMP â€“ if you add it later:
            # push rtmp://live.tiktok.com/live/${TIKTOK_KEY};
        }
    }
}

http {
    server {
        listen 80;
        location / {
            return 200 "NGINX RTMP Restream Server Running\n";
        }
    }
}
